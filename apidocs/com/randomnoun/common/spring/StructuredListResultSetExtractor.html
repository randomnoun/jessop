<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.4) on Wed Dec 23 10:07:58 AEST 2020 -->
<title>StructuredListResultSetExtractor (randomnoun common classes 1.0.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-12-23">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StructuredListResultSetExtractor (randomnoun common classes 1.0.1 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StructuredListResultSetExtractor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../index.html?com/randomnoun/common/spring/StructuredListResultSetExtractor.html" target="_top">Frames</a></li>
<li><a href="StructuredListResultSetExtractor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.randomnoun.common.spring</a></div>
<h2 title="Class StructuredListResultSetExtractor" class="title">Class StructuredListResultSetExtractor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.randomnoun.common.spring.StructuredListResultSetExtractor</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>org.springframework.jdbc.core.ResultSetExtractor&lt;java.lang.Object&gt;</code></dd>
</dl>
<hr>
<pre>public class <a href="../../../../src-html/com/randomnoun/common/spring/StructuredListResultSetExtractor.html#line.162">StructuredListResultSetExtractor</a>
extends java.lang.Object
implements org.springframework.jdbc.core.ResultSetExtractor&lt;java.lang.Object&gt;</pre>
<div class="block">This class returns structured object graphs composed of lists/maps.
 Think of it as a poor man's JDO, using Maps and Lists rather than concrete
 classes, which allows us to omit the POJO generation step.

 <p>This ResultReader is to be used in the JdbcTemplate class to retrieve structured
 representations of queries covering more than one table. In a simple case, say a
 cowGroup contains many cows, and we wish to return the cowGroup ID and name as
 well as the cow ID and name in the one query; typically, this would be done
 through the following hypothetical SQL:

 <pre class="code">
 SELECT cowGroupId, cowGroupName, cowId, cowName
 FROM cowGroups, cows
 WHERE cows.cowGroupId = cowGroups.cowGroupId
 </pre>

 Normally, Spring would return this as a List containing a map containing four
 keys (cowGroupId, cowGroupName, cowId and cowName), containing the values of
 each column returned by the RDBMS; e.g. the code fragment

 <pre class="code">
             List result1 = jt.queryForList(sql);
             System.out.println(Text.structuredListToString("result1", result1));
             </pre>
             (with the SQL above) would produce this output (a three-element list):
 <pre class="code">
              result1 = [
                0 = {
                  COWGROUPID => 1
                  COWGROUPNAME => 'ROLLINGFIELD7'
                  COWID => 1000
                  COWNAME => 'DAISY'
                }
                1 = {
                  COWGROUPID => 2
                  COWGROUPNAME => 'SLAUGHTERHOUSE5'
                  COWID => 1001
                  COWNAME => 'BUTTERCUP'
                }
                2 = {
                  COWGROUPID => 2
                  COWGROUPNAME => 'SLAUGHTERHOUSE5'
                  COWID => 1002
                  COWNAME => 'STEVE'
                }
              ]
              </pre>

 note how both BUTTERCUP and STEVE belong to the SLAUGHTERHOUSE5 cowGroup, but
 DAISY is within it's own cowGroup. If we wanted to express this relationship
 by having a list of cows within each cowgroup, we would have to scan through
 this list manually, and filter each cow into it's parent cowGroup.

 <p>This object automates this process; e.g. the same structure above, when
 processed using the following code snippet:

 <pre class="code">
              String mapping = "cowGroupId, cowGroupName, " +
                "cowId AS cows.cowId, cowName AS cows.cowName";
              List result2 = jt.query(sql, new StructuredResultReader(mapping));
              System.out.println(Text.structuredListToString("result2", result2));
             </pre>
 ... would produce this output (a two-element list) ...
             <pre style="code">
              result2 = [
                0 = {
                  cowGroupName => 'ROLLINGFIELD7'
                  cowGroupId => 2
                  cows = [
                    0 = {
                      cowId => 1000
                      cowName => 'DAISY'
                    }
                  ]
                }
                1 = {
                  cowGroupName => 'SLAUGHTERHOUSE5'
                  cowGroupId => 1
                  cows = [
                    0 = {
                      cowId => 1001
                      cowName => 'BUTTERCUP'
                    }
                    1 = {
                      cowId => 1002
                      cowName => 'STEVE'
                    }
                  ]
                }
              ]
              </pre>

 which may be more suitable for processing. This structure can also be used within
 JSTL, e.g.

 <pre class="code">
   &lt;c:out value="${result2[0].cows[1].cowName}"/>
 </pre>

 would generate the text "STEVE".

 <p>This class can generate an arbitrary number of levels within the returned structure
 by specifying more groupings in the mapping text. This class also performs
 camelCasing of returned columns (e.g. to return 'cowName' rather than 'COWNAME').

 <p>The guts of the interface lies in the mapping string passed to the StructuredResultReader
 constructor. The syntax of this mapping string is a list of column names, separated by
 commas; a column name may also have an "AS" definition, which defines how it
 is to be represented in the returned structure.

 <i>e.g.</i> assuming a department contains many people, this mapping will group each
 person within their department:

 <pre class="code">
 departmentName, personName AS people.name, personId AS people.id
 </pre>

 which will return a List of Maps, containing two keys, 'departmentName' and 'people'.
 The people value will be a List of Maps, containing two keys, 'name' and 'id'.

 <p>If each person now has a number of addresses, we could perform a two-level grouping,
 using the following mapping:

 <pre class="code">
 department, personName AS people.name, personId AS people.id,
 addressType AS people.addresses.type
 </pre>

 <p>Each people value will now be a List of Maps containing three keys, 'name', 'id' and
 'addresses'; the 'addresses' value will be a List of Maps with only one key, 'type'.

 <p>Hope that all makes sense.

 <p>Implementation note: The resultset returned by the SQL must be sorted by
 the top-level group, then by the second-level group, and so on, for this code to
 work as expected.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>knoxg</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.springframework.jdbc.core.JdbcTemplate,java.lang.String)">StructuredListResultSetExtractor</a></span>&#8203;(org.springframework.jdbc.core.JdbcTemplate&nbsp;jt,
                                java.lang.String&nbsp;mappings)</code></th>
<td class="colLast">
<div class="block">Create a new RowMapperResultReader.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.springframework.jdbc.core.RowMapper,java.lang.String,int)">StructuredListResultSetExtractor</a></span>&#8203;(org.springframework.jdbc.core.RowMapper&lt;java.util.Map&lt;java.lang.String,&#8203;java.lang.Object&gt;&gt;&nbsp;rowMapper,
                                java.lang.String&nbsp;mappings,
                                int&nbsp;rowsExpected)</code></th>
<td class="colLast">
<div class="block">Create a new RowMapperResultReader.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#extractData(java.sql.ResultSet)">extractData</a></span>&#8203;(java.sql.ResultSet&nbsp;rs)</code></th>
<td class="colLast">
<div class="block">Required to support ResultSetExtractor interface</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processRow(java.sql.ResultSet)">processRow</a></span>&#8203;(java.sql.ResultSet&nbsp;rs)</code></th>
<td class="colLast">
<div class="block">Used by the ResultReader interface to process a single row from the database.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.springframework.jdbc.core.JdbcTemplate,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>StructuredListResultSetExtractor</h4>
<pre>public&nbsp;<a href="../../../../src-html/com/randomnoun/common/spring/StructuredListResultSetExtractor.html#line.188">StructuredListResultSetExtractor</a>&#8203;(org.springframework.jdbc.core.JdbcTemplate&nbsp;jt,
                                        java.lang.String&nbsp;mappings)</pre>
<div class="block">Create a new RowMapperResultReader.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rowMapper</code> - the RowMapper which creates an object for each row</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(org.springframework.jdbc.core.RowMapper,java.lang.String,int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>StructuredListResultSetExtractor</h4>
<pre>public&nbsp;<a href="../../../../src-html/com/randomnoun/common/spring/StructuredListResultSetExtractor.html#line.198">StructuredListResultSetExtractor</a>&#8203;(org.springframework.jdbc.core.RowMapper&lt;java.util.Map&lt;java.lang.String,&#8203;java.lang.Object&gt;&gt;&nbsp;rowMapper,
                                        java.lang.String&nbsp;mappings,
                                        int&nbsp;rowsExpected)</pre>
<div class="block">Create a new RowMapperResultReader.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rowMapper</code> - the RowMapper which creates an object for each row</dd>
<dd><code>rowsExpected</code> - the number of expected rows
 (just used for optimized collection handling)</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="extractData(java.sql.ResultSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>extractData</h4>
<pre class="methodSignature">public&nbsp;java.lang.Object&nbsp;<a href="../../../../src-html/com/randomnoun/common/spring/StructuredListResultSetExtractor.html#line.283">extractData</a>&#8203;(java.sql.ResultSet&nbsp;rs)
                             throws java.sql.SQLException,
                                    org.springframework.dao.DataAccessException</pre>
<div class="block">Required to support ResultSetExtractor interface</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>extractData</code>&nbsp;in interface&nbsp;<code>org.springframework.jdbc.core.ResultSetExtractor&lt;java.lang.Object&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rs</code> - resultSet to process</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a List of structured Maps, as described in the class javadoc</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dd><code>org.springframework.dao.DataAccessException</code></dd>
</dl>
</li>
</ul>
<a id="processRow(java.sql.ResultSet)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>processRow</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;<a href="../../../../src-html/com/randomnoun/common/spring/StructuredListResultSetExtractor.html#line.313">processRow</a>&#8203;(java.sql.ResultSet&nbsp;rs)
                throws java.sql.SQLException</pre>
<div class="block">Used by the ResultReader interface to process a single row from the database.
 
 <p>The row is read and matched against the 'levels' specified in the 
 object constructor. As values change, tree branches are created in the returned
 structured List.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>RowCallbackHandler.processRow(java.sql.ResultSet)</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StructuredListResultSetExtractor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../index.html?com/randomnoun/common/spring/StructuredListResultSetExtractor.html" target="_top">Frames</a></li>
<li><a href="StructuredListResultSetExtractor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2013&#x2013;2020 <a href="http://www.randomnoun.com">randomnoun</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
